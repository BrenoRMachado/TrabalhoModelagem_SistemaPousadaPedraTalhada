<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservas - Pousada Pedra Talhada</title>
    <link rel="stylesheet" href="../../../public/css/styles.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="../../../public/js/room-manager.js"></script>
    <style>

        main { margin-left: 260px; padding: 30px; background: #F5F7FA; min-height: 100vh; }
        
        .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #E0E0E0; }
        .page-header h1 { margin: 0; font-size: 28px; color: #333; }
        .page-header-actions { display: flex; gap: 15px; }

        .btn { padding: 10px 20px; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px; text-decoration: none; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .btn-primary { background: #5D4037; color: white; }
        .btn-primary:hover { background: #4E342E; }
        .btn-icon { background: transparent; color: #5D4037; padding: 8px; }
        .btn-icon:hover { background: #F5F5F5; }

        .filter-container { display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap; }
        .filter-group { flex: 1; min-width: 150px; }
        .filter-group label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 12px; color: #333; text-transform: uppercase; }
        .filter-group input, .filter-group select { width: 100%; padding: 10px; border: 1px solid #E0E0E0; border-radius: 8px; font-size: 14px; }
        .filter-group input:focus, .filter-group select:focus { outline: none; border-color: #5D4037; }

        .table-container { background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        table thead { background: #F5F5F5; border-bottom: 2px solid #E0E0E0; }
        table thead th { padding: 16px; text-align: left; font-weight: 600; color: #333; }
        table tbody td { padding: 16px; border-bottom: 1px solid #E0E0E0; color: #666; }
        table tbody tr:hover { background: #FAFAFA; }
        
        .status-badge { display: inline-block; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; text-transform: uppercase; }
        .status-confirmada { background: #E8F5E9; color: #00C853; }
        .status-cancelada { background: #FFEBEE; color: #FF3D00; }
        .status-checkout { background: #E3F2FD; color: #1976D2; }
        
        .action-buttons { display: flex; gap: 8px; }
        .action-buttons .btn-small { padding: 6px 12px; font-size: 12px; }
        .btn-success { background: #00C853; color: white; }
        .btn-success:hover { background: #00AA4F; }
        .btn-warning { background: #FFAB00; color: white; }
        .btn-warning:hover { background: #FF9500; }
        .btn-danger { background: #FF3D00; color: white; }
        .btn-danger:hover { background: #E63200; }

        .pagination { display: flex; justify-content: center; align-items: center; gap: 8px; margin-top: 20px; }
        .pagination-btn { padding: 6px 12px; border: 1px solid #E0E0E0; background: white; color: #5D4037; border-radius: 8px; cursor: pointer; font-weight: 600; }
        .pagination-btn.active { background: #5D4037; color: white; }

        @media (max-width: 768px) {
            .sidebar { width: 100%; height: auto; position: relative; margin-bottom: 20px; }
            main { margin-left: 0; padding: 15px; }
            .filter-container { flex-direction: column; }
            .filter-group { min-width: 100%; }
            .page-header { flex-direction: column; align-items: flex-start; gap: 15px; }
            table { font-size: 12px; }
            table thead th, table tbody td { padding: 8px; }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <aside class="sidebar">
            <div class="brand">
                <div class="logo-icon"><span class="material-icons-round">apartment</span></div>
                <div>
                    <strong>Pousada Pedra</strong><br>Talhada
                </div>
            </div>

            <nav>
                <a href="index.html"><span class="material-icons-round">dashboard</span> Dashboard</a>
                <a href="reservas.html" class="active"><span class="material-icons-round">description</span> Reservas</a>
                <a href="hospedes.html"><span class="material-icons-round">people</span> Hóspedes</a>
                <a href="financeiro.html"><span class="material-icons-round">assessment</span> Financeiro</a>
                <a href="usuarios.html"><span class="material-icons-round">security</span> Equipe e Acessos</a>                
                <a href="login.html" class="logout-link">
                    <span class="material-icons-round">logout</span> Sair
                </a>
            </nav>
        </aside>

    <!-- CONTEÚDO PRINCIPAL -->
    <main>
        <div class="page-header">
            <h1>Gerenciamento de Reservas</h1>
            <div class="page-header-actions">
                <button class="btn btn-blue" onclick="location.href='nova-reserva.html';">
                    <span class="material-icons-round">add</span> Nova Reserva
                </button>
            </div>
        </div>

        <!-- FILTROS -->
        <div class="filter-container">
            <div class="filter-group">
                <label>Buscar por Hóspede</label>
                <input type="text" id="searchGuest" placeholder="Nome do hóspede..." onkeyup="filterTable()">
            </div>
            <div class="filter-group">
                <label>Status</label>
                <select id="filterStatus" onchange="filterTable()">
                    <option value="">Todos</option>
                    <option value="Confirmada">Confirmada</option>
                    <option value="Cancelada">Cancelada</option>
                    <option value="Check-out">Check-out</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Data de Entrada</label>
                <input type="date" id="filterDate" onchange="filterTable()">
            </div>
        </div>

        <!-- TABELA DE RESERVAS -->
        <div class="table-container">
            <table id="reservasTable">
                <thead>
                    <tr>
                        <th>ID Reserva</th>
                        <th>Hóspede</th>
                        <th>Quarto</th>
                        <th>Entrada</th>
                        <th>Saída</th>
                        <th>Diárias</th>
                        <th>Total</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>#RES001</td>
                        <td>João Silva</td>
                        <td>101</td>
                        <td>03/01/2026</td>
                        <td>05/01/2026</td>
                        <td>2</td>
                        <td>R$ 400,00</td>
                        <td><span class="status-badge status-confirmada">Confirmada</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-success btn-small" onclick="checkIn(1)">
                                    <span class="material-icons-round" style="font-size: 16px;">check_circle</span> Check-in
                                </button>
                                <button class="btn btn-warning btn-small" onclick="editReservation(1)">
                                    <span class="material-icons-round" style="font-size: 16px;">edit</span> Editar
                                </button>
                                <button class="btn btn-danger btn-small" onclick="cancelReservation(1)">
                                    <span class="material-icons-round" style="font-size: 16px;">delete</span> Cancelar
                                </button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>#RES002</td>
                        <td>Maria Santos</td>
                        <td>201</td>
                        <td>04/01/2026</td>
                        <td>07/01/2026</td>
                        <td>3</td>
                        <td>R$ 600,00</td>
                        <td><span class="status-badge status-checkout">Check-out</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-blue btn-small" onclick="checkout(2)">
                                    <span class="material-icons-round" style="font-size: 16px;">exit_to_app</span> Checkout
                                </button>
                                <button class="btn btn-warning btn-small" onclick="editReservation(2)">
                                    <span class="material-icons-round" style="font-size: 16px;">edit</span> Editar
                                </button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>#RES003</td>
                        <td>Pedro Oliveira</td>
                        <td>102</td>
                        <td>02/01/2026</td>
                        <td>03/01/2026</td>
                        <td>1</td>
                        <td>R$ 200,00</td>
                        <td><span class="status-badge status-cancelada">Cancelada</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-warning btn-small" onclick="viewDetails(3)">
                                    <span class="material-icons-round" style="font-size: 16px;">info</span> Detalhes
                                </button>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>#RES004</td>
                        <td>Ana Costa</td>
                        <td>202</td>
                        <td>05/01/2026</td>
                        <td>08/01/2026</td>
                        <td>3</td>
                        <td>R$ 600,00</td>
                        <td><span class="status-badge status-confirmada">Confirmada</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-success btn-small" onclick="checkIn(4)">
                                    <span class="material-icons-round" style="font-size: 16px;">check_circle</span> Check-in
                                </button>
                                <button class="btn btn-warning btn-small" onclick="editReservation(4)">
                                    <span class="material-icons-round" style="font-size: 16px;">edit</span> Editar
                                </button>
                                <button class="btn btn-danger btn-small" onclick="cancelReservation(4)">
                                    <span class="material-icons-round" style="font-size: 16px;">delete</span> Cancelar
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- PAGINAÇÃO -->
        <div class="pagination">
            <button class="pagination-btn" onclick="previousPage()">« Anterior</button>
            <span style="font-size: 12px; color: #666;">Página 1 de 3</span>
            <button class="pagination-btn" onclick="nextPage()">Próxima »</button>
        </div>
    </main>

    <script>
        function filterTable() {
            const searchText = document.getElementById('searchGuest').value.toLowerCase();
            const statusFilter = document.getElementById('filterStatus').value;
            const dateFilter = document.getElementById('filterDate').value;
            
            const table = document.getElementById('reservasTable');
            const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');
            
            for (let row of rows) {
                let guestName = row.cells[1].textContent.toLowerCase();
                let status = row.cells[7].textContent.trim();
                let entryDate = row.cells[3].textContent;
                
                let guestMatch = guestName.includes(searchText);
                let statusMatch = !statusFilter || status.includes(statusFilter);
                let dateMatch = !dateFilter || entryDate.includes(dateFilter);
                
                row.style.display = (guestMatch && statusMatch && dateMatch) ? '' : 'none';
            }
        }

        function checkIn(id) {
            alert('Check-in realizado para a reserva #RES' + String(id).padStart(3, '0'));
        }

        function checkout(id) {
            window.location.href = 'checkout.html?id=' + id;
        }

        function editReservation(id) {
            window.location.href = 'nova-reserva.html?id=' + id;
        }

        function cancelReservation(id) {
            if (confirm('Tem certeza que deseja cancelar esta reserva?')) {
                alert('Reserva #RES' + String(id).padStart(3, '0') + ' cancelada com sucesso!');
            }
        }

        function viewDetails(id) {
            alert('Detalhes da reserva #RES' + String(id).padStart(3, '0'));
        }

        function previousPage() {
            alert('Ir para página anterior');
        }

        function nextPage() {
            alert('Ir para próxima página');
        }
    </script>
</body>
</html>
